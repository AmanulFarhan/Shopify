<%- include("../partials/head.ejs") %>

<section>
  <div class="container mt-4">
    <h1 class="text-center fw-bold text-primary mb-4">ðŸ“¦ Your Orders</h1>

    <% if (orders.length === 0) { %>
      <div class="text-center text-muted my-5">
        <h4>No orders yet</h4>
        <a href="/" class="btn btn-outline-primary mt-3">Start Shopping</a>
      </div>
    <% } else { %>

    <div class="table-responsive">
      <table class="table table-bordered align-middle text-center shadow-sm">
        <thead class="table-light">
          <tr>
            <th>Date</th>
            <th>Address</th>
            <th>Pincode</th>
            <th>Mobile</th>
            <th>Amount</th>
            <th>Payment</th>
            <th>Status</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <% orders.forEach(order => { %>
          <tr>
            <td><%= new Date(order.createdAt).toLocaleDateString() %></td>
            <td><%= order.deliveryDetails.address %></td>
            <td><%= order.deliveryDetails.pincode %></td>
            <td><%= order.deliveryDetails.mobile %></td>
            <td>â‚¹<%= order.totalAmount %></td>
            <td>
              <span class="badge <%= order.paymentMethod === 'COD' ? 'bg-secondary' : 'bg-info text-dark' %>">
                <%= order.paymentMethod %>
              </span>
            </td>
            <td>
              <span class="badge 
                <%= order.status === 'placed' ? 'bg-success' :
                     order.status === 'pending' ? 'bg-danger' :
                     order.status === 'shipped' ? 'bg-success' :
                     'bg-secondary' %>">
                <%= order.status %>
              </span>
            </td>
            <td>
              <a href="/user/cart/view-order-products/<%= order._id %>" 
                 class="btn btn-outline-primary btn-sm">
                 View Products
              </a>
            </td>
          </tr>
          <% }) %>
        </tbody>
      </table>
    </div>

    <% } %>
  </div>
</section>

<%- include("../partials/footer.ejs") %>
